<!-- NOTIFICATIONS -->
<div class="notifications-container">
  <div *ngFor="let notif of notifications" [class]="'notification notification-' + notif.type">
    <span class="notification-message">{{ notif.message }}</span>
    <button class="notification-close" (click)="dismissNotification(notif.id)">‚úï</button>
  </div>
</div>

<!-- STUDENT TYPE SELECTION -->
<div class="enrollment-container" *ngIf="workflowStep === 'type-select'">
  <div class="enrollment-header">
    <div class="header-content">
      <h1>üéì Welcome to University Enrollment System</h1>
      <p class="subtitle">Let's Get You Started</p>
    </div>
  </div>

  <div class="type-selection-container">
    <h2>Are You a New or Existing Student?</h2>
    <p class="instructions">Select your student type to continue with enrollment</p>

    <div class="type-options">
      <div class="type-card" (click)="selectStudentType('new')">
        <div class="type-icon">üë§</div>
        <h3>New Student</h3>
        <p class="type-description">First time enrolling. You'll select your program and complete registration.</p>
        <button class="btn-select-type">Select as New Student</button>
      </div>

      <div class="type-card" (click)="selectStudentType('existing')">
        <div class="type-icon">üìö</div>
        <h3>Existing Student</h3>
        <p class="type-description">Returning student. Continue your enrollment and add/drop subjects.</p>
        <button class="btn-select-type">I'm an Existing Student</button>
      </div>
    </div>
  </div>
</div>

<!-- PROGRAM SELECTION STEP -->
<div class="enrollment-container" *ngIf="workflowStep === 'program-select'">
  <div class="enrollment-header">
    <div class="header-content">
      <h1>üéì Welcome to University</h1>
      <p class="subtitle">Select Your Program</p>
    </div>
  </div>

  <div class="program-selection-container">
    <h2>Choose Your Program</h2>
    <p class="instructions">Select the program you want to enroll in. You'll be able to add subjects after registration.</p>

    <div class="programs-grid">
      <div *ngFor="let program of programs" 
           class="program-card" 
           (click)="selectProgram(program.id)"
           [class.selected]="selectedProgram === program.id">
        <div class="program-icon">üìö</div>
        <h3>{{ program.name }}</h3>
        <p class="program-code">{{ program.code }}</p>
        <p class="program-description">{{ program.description }}</p>
        <button class="btn-select">Select Program</button>
      </div>
    </div>
  </div>
</div>

<!-- REGISTRATION FORM STEP -->
<div class="enrollment-container" *ngIf="workflowStep === 'registration'">
  <div class="enrollment-header">
    <div class="header-content">
      <h1>üìù Student Registration Form</h1>
      <p class="subtitle">{{ getSelectedProgramName() }}</p>
    </div>
  </div>

  <div class="registration-container">
    <button class="btn-back" (click)="backToProgram()">‚Üê Back to Programs</button>

    <div class="registration-form">
      <h2>Complete Your Registration</h2>
      
      <!-- Error Message -->
      <div class="error-message" *ngIf="registrationError">
        <p>‚ö†Ô∏è {{ registrationError }}</p>
      </div>

      <!-- Personal Information Section -->
      <div class="form-section">
        <h3>Personal Information</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="firstName">First Name <span class="required">*</span></label>
            <input 
              type="text" 
              id="firstName" 
              class="form-control" 
              placeholder="Juan"
              [(ngModel)]="registrationForm.firstName"
              [disabled]="isSubmittingRegistration">
          </div>
          <div class="form-group">
            <label for="lastName">Last Name <span class="required">*</span></label>
            <input 
              type="text" 
              id="lastName" 
              class="form-control" 
              placeholder="Dela Cruz"
              [(ngModel)]="registrationForm.lastName"
              [disabled]="isSubmittingRegistration">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="email">Email Address <span class="required">*</span></label>
            <input 
              type="email" 
              id="email" 
              class="form-control" 
              placeholder="juan.delacruz@university.edu"
              [(ngModel)]="registrationForm.email"
              [disabled]="isSubmittingRegistration">
          </div>
          <div class="form-group">
            <label for="phone">Phone Number <span class="required">*</span></label>
            <input 
              type="tel" 
              id="phone" 
              class="form-control" 
              placeholder="09123456789"
              [(ngModel)]="registrationForm.phone"
              [disabled]="isSubmittingRegistration">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="dob">Date of Birth</label>
            <input 
              type="date" 
              id="dob" 
              class="form-control"
              [(ngModel)]="registrationForm.dateOfBirth"
              [disabled]="isSubmittingRegistration">
          </div>
          <div class="form-group">
            <label for="address">Address</label>
            <input 
              type="text" 
              id="address" 
              class="form-control" 
              placeholder="Street Address, City, Province"
              [(ngModel)]="registrationForm.address"
              [disabled]="isSubmittingRegistration">
          </div>
        </div>
      </div>

      <!-- Emergency Contact Section -->
      <div class="form-section">
        <h3>Emergency Contact</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="emergencyName">Contact Person Name</label>
            <input 
              type="text" 
              id="emergencyName" 
              class="form-control" 
              placeholder="Maria Dela Cruz"
              [(ngModel)]="registrationForm.emergencyContact"
              [disabled]="isSubmittingRegistration">
          </div>
          <div class="form-group">
            <label for="emergencyPhone">Contact Person Phone</label>
            <input 
              type="tel" 
              id="emergencyPhone" 
              class="form-control" 
              placeholder="09987654321"
              [(ngModel)]="registrationForm.emergencyPhone"
              [disabled]="isSubmittingRegistration">
          </div>
        </div>
      </div>

      <!-- Info Box -->
      <div class="info-box">
        <p>‚úÖ After submitting this form, you'll need to complete payment before course enrollment with {{ getSelectedProgramName() }}.</p>
      </div>

      <!-- Buttons -->
      <div class="form-actions">
        <button class="btn-cancel" (click)="backToProgram()" [disabled]="isSubmittingRegistration">Cancel</button>
        <button class="btn-submit" (click)="submitRegistration()" [disabled]="isSubmittingRegistration">
          {{ isSubmittingRegistration ? 'Submitting...' : 'Complete Registration' }}
        </button>
      </div>
    </div>
  </div>
</div>

<!-- PAYMENT STEP -->
<div class="enrollment-container" *ngIf="workflowStep === 'payment'">
  <div class="enrollment-header">
    <div class="header-content">
      <h1>üí≥ Payment & Verification</h1>
      <p class="subtitle">Complete Your Enrollment</p>
    </div>
  </div>

  <div class="payment-container">
    <div class="payment-card">
      <h2>Enrollment Fee</h2>

      <!-- Student Summary -->
      <div class="student-summary">
        <h3>Enrollment Summary</h3>
        <div class="summary-row">
          <label>Student ID:</label>
          <p>{{ student.id }}</p>
        </div>
        <div class="summary-row">
          <label>Name:</label>
          <p>{{ student.firstName }} {{ student.lastName }}</p>
        </div>
        <div class="summary-row">
          <label>Program:</label>
          <p>{{ student.program }}</p>
        </div>
        <div class="summary-row">
          <label>Email:</label>
          <p>{{ student.email }}</p>
        </div>
      </div>

      <!-- Payment Details -->
      <div class="payment-details">
        <h3>Payment Details</h3>
        <div class="payment-row">
          <span>Tuition Fee</span>
          <span class="amount">‚Ç±{{ paymentInfo.amount | number:'1.0-0' }}</span>
        </div>
        <div class="payment-row total">
          <span>Total Amount Due</span>
          <span class="amount">‚Ç±{{ paymentInfo.amount | number:'1.0-0' }}</span>
        </div>
        <p class="payment-due">Due by: {{ paymentInfo.dueDate | date: 'MMMM dd, yyyy' }}</p>
      </div>

      <!-- Payment Methods -->
      <div class="payment-methods">
        <h3>Payment Method</h3>
        <div class="method-options">
          <div class="method-option selected">
            <input type="radio" id="online" name="method" value="online" checked>
            <label for="online">Online Payment</label>
          </div>
          <div class="method-option">
            <input type="radio" id="bank" name="method" value="bank">
            <label for="bank">Bank Transfer</label>
          </div>
          <div class="method-option">
            <input type="radio" id="cash" name="method" value="cash">
            <label for="cash">Cash Payment (Cashier)</label>
          </div>
        </div>
      </div>

      <!-- Payment Button -->
      <div class="payment-actions">
        <button class="btn-cancel" (click)="backToProgram()" [disabled]="isProcessingPayment">Cancel</button>
        <button class="btn-pay" (click)="processPayment()" [disabled]="isProcessingPayment">
          {{ isProcessingPayment ? 'Processing Payment...' : 'Proceed with Payment' }}
        </button>
      </div>

      <div class="info-box">
        <p>üîí Your payment information is secure and encrypted.</p>
      </div>
    </div>
  </div>
</div>

<!-- APPROVAL STEP -->
<div class="enrollment-container" *ngIf="workflowStep === 'approval'">
  <div class="enrollment-header">
    <div class="header-content">
      <h1>‚úÖ Registration Approval</h1>
      <p class="subtitle">Finalizing Your Enrollment</p>
    </div>
  </div>

  <div class="approval-container">
    <div class="approval-card">
      <div class="approval-status" [class.pending]="isApprovalPending" [class.approved]="!isApprovalPending">
        <div class="status-icon">
          <span *ngIf="isApprovalPending">‚è≥</span>
          <span *ngIf="!isApprovalPending">‚úÖ</span>
        </div>
        <h2>{{ isApprovalPending ? 'Processing Your Application...' : 'Registration Approved!' }}</h2>
        <p *ngIf="isApprovalPending">Your enrollment is being reviewed by the registrar. Please wait...</p>
        <p *ngIf="!isApprovalPending">{{ approvalMessage }}</p>
      </div>

      <!-- Student Information -->
      <div class="approval-info">
        <h3>Enrollment Information</h3>
        <div class="info-row">
          <label>Student ID:</label>
          <p>{{ student.id }}</p>
        </div>
        <div class="info-row">
          <label>Student Name:</label>
          <p>{{ student.firstName }} {{ student.lastName }}</p>
        </div>
        <div class="info-row">
          <label>Program:</label>
          <p>{{ student.program }}</p>
        </div>
        <div class="info-row">
          <label>Enrollment Status:</label>
          <p>
            <span class="badge" [class]="'badge-' + student.enrollmentStatus.toLowerCase()">
              {{ student.enrollmentStatus }}
            </span>
          </p>
        </div>
        <div class="info-row">
          <label>Payment Status:</label>
          <p>
            <span class="badge badge-paid">{{ student.paymentStatus }}</span>
          </p>
        </div>
        <div class="info-row">
          <label>Approval Status:</label>
          <p>
            <span class="badge" [class]="'badge-' + student.approvalStatus.toLowerCase()">
              {{ student.approvalStatus }}
            </span>
          </p>
        </div>
      </div>

      <!-- Next Steps -->
      <div *ngIf="!isApprovalPending" class="next-steps">
        <h3>Next Steps</h3>
        <ol>
          <li>Proceed to course enrollment</li>
          <li>Select subjects for this semester</li>
          <li>Confirm your schedule</li>
          <li>Download your class schedule</li>
        </ol>
      </div>

      <!-- Action Button -->
      <div class="approval-actions" *ngIf="!isApprovalPending">
        <button class="btn-proceed" (click)="proceedToDashboard()">
          Proceed to Course Enrollment ‚Üí
        </button>
      </div>
    </div>
  </div>
</div>

<!-- DASHBOARD & COURSE ENROLLMENT STEP -->
<div class="enrollment-container" *ngIf="workflowStep === 'dashboard'">
  <!-- Header Section -->
  <div class="enrollment-header">
    <div class="header-content">
      <h1>üéì Student Enrollment System</h1>
      <p class="subtitle">Academic Year 2024-2025 | 1st Semester</p>
    </div>
  </div>

  <!-- Deadline Warning -->
  <div class="deadline-warning" *ngIf="isDeadlineApproaching">
    <div class="warning-content">
      <span class="warning-icon">‚è∞</span>
      <div class="warning-text">
        <p><strong>Enrollment Deadline Approaching!</strong></p>
        <p>You have {{ daysUntilDeadline }} days left to enroll in courses (Deadline: {{ enrollmentDeadline | date: 'MMMM dd, yyyy' }})</p>
      </div>
    </div>
  </div>

  <!-- Navigation Tabs -->
  <div class="nav-tabs">
    <button 
      class="nav-tab" 
      [class.active]="currentView === 'dashboard'"
      (click)="currentView = 'dashboard'">
      <span>üìä</span> Dashboard
    </button>
    <button 
      class="nav-tab" 
      [class.active]="currentView === 'enroll'"
      (click)="currentView = 'enroll'">
      <span>‚ûï</span> Enroll Subjects
    </button>
    <button 
      class="nav-tab" 
      [class.active]="currentView === 'manage'"
      (click)="currentView = 'manage'">
      <span>‚öôÔ∏è</span> Manage Subjects
    </button>
  </div>

  <!-- Dashboard View -->
  <div class="view-container" *ngIf="currentView === 'dashboard'">
    <!-- Student Data Sheet -->
    <div class="student-data-sheet">
      <div class="sheet-header">
        <h2>üìã Student Information Sheet</h2>
        <span class="student-type-badge" [class]="'badge-' + student.studentType.toLowerCase()">
          {{ student.studentType }} Student
        </span>
      </div>

      <div class="student-data-grid">
        <div class="data-column">
          <h3>Personal Information</h3>
          <div class="data-item">
            <label>Student ID:</label>
            <p>{{ student.id }}</p>
          </div>
          <div class="data-item">
            <label>Full Name:</label>
            <p>{{ student.firstName }} {{ student.lastName }}</p>
          </div>
          <div class="data-item">
            <label>Date of Birth:</label>
            <p>{{ student.dateOfBirth | date: 'MMMM dd, yyyy' }}</p>
          </div>
          <div class="data-item">
            <label>Address:</label>
            <p>{{ student.address }}</p>
          </div>
        </div>

        <div class="data-column">
          <h3>Academic Information</h3>
          <div class="data-item">
            <label>Program:</label>
            <p>{{ student.program }}</p>
          </div>
          <div class="data-item">
            <label>Year Level:</label>
            <p>{{ student.yearLevel }}</p>
          </div>
          <div class="data-item">
            <label>Current GPA:</label>
            <p class="gpa-value">{{ student.gpa | number: '1.2-2' }}</p>
          </div>
          <div class="data-item">
            <label>Status:</label>
            <p><span class="badge" [class]="'badge-' + student.enrollmentStatus.toLowerCase()">{{ student.enrollmentStatus }}</span></p>
          </div>
        </div>

        <div class="data-column">
          <h3>Contact Information</h3>
          <div class="data-item">
            <label>Email:</label>
            <p><a [href]="'mailto:' + student.email">{{ student.email }}</a></p>
          </div>
          <div class="data-item">
            <label>Phone:</label>
            <p><a [href]="'tel:' + student.phone">{{ student.phone }}</a></p>
          </div>
          <div class="data-item">
            <label>Emergency Contact:</label>
            <p>{{ student.emergencyContact }}</p>
          </div>
          <div class="data-item">
            <label>Enrollment Date:</label>
            <p>{{ student.enrollmentDate | date: 'MMMM dd, yyyy' }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Enrollment Status Summary -->
    <div class="enrollment-status">
      <div class="status-card pending" *ngIf="pendingCourses.length > 0">
        <h3>‚è≥ Pending Approval</h3>
        <p class="count">{{ pendingCourses.length }}</p>
        <p class="subtitle">Subjects awaiting approval</p>
      </div>
      <div class="status-card enrolled">
        <h3>‚úÖ Enrolled</h3>
        <p class="count">{{ approvedCourses.length }}</p>
        <p class="subtitle">Subjects approved</p>
      </div>
      <div class="status-card credits">
        <h3>üìñ Total Credits</h3>
        <p class="count">{{ totalEnrolledCredits }}</p>
        <p class="subtitle">Out of {{ maxCredits }} units</p>
      </div>
    </div>

    <!-- Credit Warning -->
    <div class="credit-warning" *ngIf="creditWarning">
      <p>‚ö†Ô∏è {{ creditWarning }}</p>
    </div>

    <!-- Pending Courses -->
    <div class="pending-section" *ngIf="pendingCourses.length > 0">
      <div class="section-header">
        <h2>‚è≥ Pending For Approval</h2>
        <button class="btn-approve-all" (click)="approveAllPendingCourses()" *ngIf="pendingCourses.length > 0">
          Approve All
        </button>
      </div>
      <div class="courses-grid">
        <div *ngFor="let course of pendingCourses" class="course-card pending-card">
          <div class="status-indicator">Pending</div>
          <div class="course-header">
            <span class="course-code">{{ course.code }}</span>
            <h3>{{ course.name }}</h3>
          </div>
          <div class="course-body">
            <p class="course-detail"><strong>Credits:</strong> {{ course.credits }}</p>
            <p class="course-detail"><strong>Instructor:</strong> {{ course.instructor }}</p>
            <p class="course-detail"><strong>Schedule:</strong> {{ course.schedule }}</p>
            <p class="course-detail"><strong>Room:</strong> {{ course.room }}</p>
            <p class="course-detail"><strong>Enrolled:</strong> {{ course.enrollmentDate | date: 'MMM dd, yyyy' }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Enrolled Courses -->
    <div class="enrolled-section" *ngIf="approvedCourses.length > 0">
      <h2>‚úÖ Enrolled Subjects</h2>
      <div class="courses-grid">
        <div *ngFor="let course of approvedCourses" class="course-card enrolled-card">
          <div class="status-indicator enrolled">Enrolled</div>
          <div class="course-header">
            <span class="course-code">{{ course.code }}</span>
            <h3>{{ course.name }}</h3>
          </div>
          <div class="course-body">
            <p class="course-detail"><strong>Credits:</strong> {{ course.credits }}</p>
            <p class="course-detail"><strong>Instructor:</strong> {{ course.instructor }}</p>
            <p class="course-detail"><strong>Schedule:</strong> {{ course.schedule }}</p>
            <p class="course-detail"><strong>Room:</strong> {{ course.room }}</p>
          </div>
          <div class="course-footer">
            <button class="btn-drop-small" (click)="openDropModal(course)" [disabled]="!canDropCourse()">Drop</button>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="enrolledCourses.length === 0" class="no-data">
      <p>üìö No subjects enrolled yet. Click "Enroll Subjects" to get started!</p>
    </div>
  </div>

  <!-- Enroll View -->
  <div class="view-container" *ngIf="currentView === 'enroll'">
    <div class="enroll-header">
      <h2>Enroll New Subjects</h2>
      <p>Semester: {{ currentSemester }}</p>
      <p *ngIf="!canAddCourse()" class="deadline-expired">‚ùå Enrollment deadline has passed. Contact registrar for late enrollment.</p>
    </div>

    <!-- Search and Filter -->
    <div class="search-filters" *ngIf="canAddCourse()">
      <input 
        type="text" 
        class="search-input" 
        placeholder="Search by course code or name (e.g., CS111, Programming)..."
        [(ngModel)]="searchQuery">
      <select class="filter-select" [(ngModel)]="filterDepartment">
        <option [value]="null">All Departments</option>
        <option *ngFor="let dept of departments" [value]="dept">{{ dept }}</option>
      </select>
    </div>

    <!-- Available Courses -->
    <div *ngIf="availableCoursesFiltered.length === 0" class="no-data">
      <p *ngIf="canAddCourse()">No courses match your search criteria.</p>
      <p *ngIf="!canAddCourse()">Enrollment period has closed. Please contact the registrar.</p>
    </div>

    <div class="courses-grid">
      <div *ngFor="let course of availableCoursesFiltered" class="course-card available-card">
        <div class="course-header">
          <div>
            <span class="course-code">{{ course.code }}</span>
            <h3>{{ course.name }}</h3>
          </div>
          <span class="credits-badge">{{ course.credits }} Units</span>
        </div>

        <div class="course-body">
          <p class="course-description">{{ course.description }}</p>
          <div class="course-detail">
            <strong>Department:</strong> {{ course.department }}
          </div>
          <div class="course-detail">
            <strong>Instructor:</strong> {{ course.instructor }}
          </div>
          <div class="course-detail">
            <strong>Schedule:</strong> {{ course.schedule }}
          </div>
          <div class="course-detail">
            <strong>Room:</strong> {{ course.room }}
          </div>
          <div class="course-detail seats">
            <strong>Available Seats:</strong>
            <span [class.almost-full]="isCourseAlmostFull(course)">
              {{ getAvailableSeats(course) }}/{{ course.capacity }}
              <span *ngIf="isCourseAlmostFull(course)" class="almost-full-badge">Almost Full</span>
            </span>
          </div>
        </div>

        <div class="course-footer">
          <button 
            class="btn-enroll" 
            (click)="openEnrollModal(course)"
            [disabled]="!canEnroll(course) || !canAddCourse()">
            {{ canEnroll(course) ? 'Enroll Now' : 'No Seats' }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Manage View -->
  <div class="view-container" *ngIf="currentView === 'manage'">
    <div class="manage-header">
      <h2>Manage Your Subjects</h2>
      <p>Add or drop subjects from your enrollment</p>
      <p *ngIf="canDropCourse()" class="deadline-info">‚úÖ Add/Drop deadline: {{ addDropDeadline | date: 'MMMM dd, yyyy' }}</p>
      <p *ngIf="!canDropCourse()" class="deadline-expired">‚ùå Add/Drop deadline has passed</p>
    </div>

    <div *ngIf="enrolledCourses.length === 0" class="no-data">
      <p>No subjects enrolled. Enroll subjects first to manage them.</p>
    </div>

    <div *ngIf="enrolledCourses.length > 0">
      <!-- Pending Approval -->
      <div *ngIf="pendingCourses.length > 0" class="manage-section">
        <h3>‚è≥ Pending Approval</h3>
        <div class="manage-table">
          <div class="table-header">
            <div class="col-code">Code</div>
            <div class="col-name">Course Name</div>
            <div class="col-credits">Credits</div>
            <div class="col-status">Status</div>
            <div class="col-action">Action</div>
          </div>
          <div *ngFor="let course of pendingCourses" class="table-row">
            <div class="col-code">{{ course.code }}</div>
            <div class="col-name">{{ course.name }}</div>
            <div class="col-credits">{{ course.credits }}</div>
            <div class="col-status"><span class="badge pending">Pending</span></div>
            <div class="col-action">
              <button class="btn-drop-table" (click)="openDropModal(course)" [disabled]="!canDropCourse()">Drop</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Enrolled -->
      <div *ngIf="approvedCourses.length > 0" class="manage-section">
        <h3>‚úÖ Enrolled Subjects</h3>
        <div class="manage-table">
          <div class="table-header">
            <div class="col-code">Code</div>
            <div class="col-name">Course Name</div>
            <div class="col-credits">Credits</div>
            <div class="col-status">Status</div>
            <div class="col-action">Action</div>
          </div>
          <div *ngFor="let course of approvedCourses" class="table-row">
            <div class="col-code">{{ course.code }}</div>
            <div class="col-name">{{ course.name }}</div>
            <div class="col-credits">{{ course.credits }}</div>
            <div class="col-status"><span class="badge enrolled">Enrolled</span></div>
            <div class="col-action">
              <button class="btn-drop-table" (click)="openDropModal(course)" [disabled]="!canDropCourse()">Drop</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Enroll Modal -->
<div class="modal-overlay" *ngIf="showEnrollModal" (click)="closeEnrollModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Confirm Enrollment</h2>
      <button class="modal-close" (click)="closeEnrollModal()">‚úï</button>
    </div>

    <div class="modal-body" *ngIf="selectedCourseForEnroll">
      <div class="course-summary">
        <div class="summary-row">
          <label>Course Code:</label>
          <p>{{ selectedCourseForEnroll.code }}</p>
        </div>
        <div class="summary-row">
          <label>Course Name:</label>
          <p>{{ selectedCourseForEnroll.name }}</p>
        </div>
        <div class="summary-row">
          <label>Credits:</label>
          <p>{{ selectedCourseForEnroll.credits }} units</p>
        </div>
        <div class="summary-row">
          <label>Instructor:</label>
          <p>{{ selectedCourseForEnroll.instructor }}</p>
        </div>
        <div class="summary-row">
          <label>Schedule:</label>
          <p>{{ selectedCourseForEnroll.schedule }}</p>
        </div>
        <div class="summary-row">
          <label>Room:</label>
          <p>{{ selectedCourseForEnroll.room }}</p>
        </div>
        <div class="summary-row">
          <label>Department:</label>
          <p>{{ selectedCourseForEnroll.department }}</p>
        </div>
      </div>

      <div class="form-group">
        <label for="priority">Priority:</label>
        <select 
          id="priority" 
          class="form-control" 
          [(ngModel)]="enrollmentForm.priority">
          <option value="Low">Low</option>
          <option value="Medium">Medium</option>
          <option value="High">High</option>
        </select>
      </div>

      <div class="form-group">
        <label for="notes">Notes:</label>
        <textarea 
          id="notes" 
          class="form-control" 
          rows="3" 
          placeholder="Add any special notes..."
          [(ngModel)]="enrollmentForm.notes"></textarea>
      </div>

      <div class="info-box">
        <p>üìå This subject will be marked as <strong>PENDING</strong> until approved by the registrar.</p>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-cancel" (click)="closeEnrollModal()">Cancel</button>
      <button class="btn-confirm" (click)="confirmEnrollment()">Enroll Subject</button>
    </div>
  </div>
</div>

<!-- Drop Modal -->
<div class="modal-overlay" *ngIf="showDropModal" (click)="closeDropModal()">
  <div class="modal-content modal-small" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Drop Subject</h2>
      <button class="modal-close" (click)="closeDropModal()">‚úï</button>
    </div>

    <div class="modal-body" *ngIf="selectedCourseForDrop">
      <div class="warning-box">
        <p class="warning-text">‚ö†Ô∏è Are you sure you want to drop this subject?</p>
      </div>

      <div class="course-summary">
        <div class="summary-row">
          <label>Subject:</label>
          <p>{{ selectedCourseForDrop.code }} - {{ selectedCourseForDrop.name }}</p>
        </div>
        <div class="summary-row">
          <label>Credits:</label>
          <p>{{ selectedCourseForDrop.credits }} units</p>
        </div>
        <div class="summary-row">
          <label>Current Status:</label>
          <p><span class="badge" [class]="'badge-' + selectedCourseForDrop.status.toLowerCase()">{{ selectedCourseForDrop.status }}</span></p>
        </div>
      </div>

      <p class="note-text">This action will remove the subject from your enrollment record.</p>
    </div>

    <div class="modal-footer">
      <button class="btn-cancel" (click)="closeDropModal()">Cancel</button>
      <button class="btn-danger" (click)="confirmDrop()">Drop Subject</button>
    </div>
  </div>
</div>

<!-- Confirmation Modal -->
<div class="modal-overlay" *ngIf="showConfirmationModal" (click)="closeConfirmationModal()">
  <div class="modal-content modal-success" (click)="$event.stopPropagation()">
    <div class="modal-header success">
      <h2>‚úÖ Enrollment Successful</h2>
    </div>

    <div class="modal-body">
      <div class="success-box">
        <p>Your enrollment request has been submitted successfully!</p>
        <p>Your subject is now <strong>PENDING</strong> approval from the registrar.</p>
        <p>You will receive a notification once it's approved.</p>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-confirm" (click)="closeConfirmationModal()">OK</button>
    </div>
  </div>
</div>
